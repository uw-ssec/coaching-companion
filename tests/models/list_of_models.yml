AWSDashboard:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
Access:
  content_create: varchar(10) # Should this become a boolean?
  content_delete: varchar(10) # Should this become a boolean?
  content_edit: varchar(10) # Should this become a boolean?
  recipe_key: int
  repudiated_url: varchar(50)
  role_access: varchar(50)
  # created_at: unix timestamp
  # created_by: bigint
  # title: varchar(255)
  # type: varchar(50)
AccreditationCertificate:
# - created_by: bigint
# - created_at: unix timestamp
# - title: varchar(255)
# - type: varchar(50)
AccreditationSubmission:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
ActionPlans:
- completed_at: int
- created_at: unix timestamp
- created_by: bigint
- cycle_summary: text
- info: text
- next_step_notes: text
- status: varchar(20)
- step-info-NaN: varchar(100)
- title: varchar(255)
- type: varchar(50)
AddPlayByPlay:
- created_at: unix timestamp
- created_by: bigint
- item_id: int
- timestamp: int
- title: varchar(255)
- type: varchar(50)
Alias:
- alias_id: int
- children_sequencer: varchar(10)
- created_at: unix timestamp
- created_by: bigint
- id: varchar(50)
- login_disabled: boolean
- media: varchar(60)
- media_type: varchar(100)
- on_cloudfront: varchar(10)
- published: varchar(50)
- ratings_id: varchar(50)
- recipe: varchar(255)
- recipe_key: int
- recipe_name: varchar(50)
- report_types: varchar(50)
- template: varchar(100)
- title: varchar(255)
- type: varchar(50)
Annotations:
- created_at: unix timestamp
- created_by: bigint
- info: text
- recipe_key: int
- title: varchar(255)
- type: varchar(50)
AssessmentsClassroom:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
AssessmentsDashboard: # Fixed the spelling of "AssessmentsDashboard"
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
AssessmentsEvaluation:
- created_by: bigint
- recipe_key: int
- created_at: unix timestamp
- title_eng: varchar(255)
- title: varchar(255)
- type: varchar(50)
AssessmentsLister:
- created_by: bigint
- created_at: unix timestamp
- title_eng: varchar(255)
- title: varchar(255)
- type: varchar(50)
- lister_authority: varchar(50)
- template: varchar(100)
AssessmentsRating:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
AssessmentsReport:
- created_by: bigint
- created_at: unix timestamp
- title_eng: varchar(255)
- title: varchar(255)
- type: varchar(50)
- title_esp: varchar(255)
AssessmentsReportClassroom:
- created_by: bigint
- created_at: unix timestamp
- title_eng: varchar(255)
- title: varchar(255)
- type: varchar(50)
AssessmentsSite:
- created_by: bigint
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
Assets:
- annotations_key: varchar(15)
- assets_editors: varchar(100)
- assets_members: varchar(100)
- cqelcoach_observation: int
- created_at: unix timestamp
- created_by: bigint
- media_type: varchar(100)
- notes: text
- observation_date: varchar(25)
- pbc_asset: varchar(50)
- resource_tag: varchar(255)
- title: varchar(255)
- type: varchar(50)
Assignments:
  # created_at: unix timestamp
  # created_by: bigint
  # title: varchar(255)
  # type: varchar(50)
CoachingPartnership:
- coach: varchar(100)
- coachee: varchar(100)
- coachee_user: varchar(15)
- coach_user: varchar(15)
- created_at: unix timestamp
- created_by: bigint
- parent_url: varchar(50)
- participant: varchar(50)
- participant_user: varchar(50)
- partnership_filters: varchar(100)
- partnership_status: varchar(25)
- pbc_members: varchar(100)
- pbc_roles: varchar(100)
- prototype_description: varchar(200)
- prototype_status: varchar(10)
- template: varchar(100)
- title: varchar(255)
- type: varchar(50)
CollaboraEndpoint:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
Comments:
- created_at: unix timestamp
- created_by: bigint
- recipe_key: int
- submit: varchar(50)
- Submit: varchar(50)
- text: text
- timestamp: int
- title: varchar(255)
- type: varchar(50)
ConnectToMerit:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
ContactForm:
- created_by: bigint
- recipe: varchar(255)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
CopAssets:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
CopGroups:
- cop_admins: varchar(100)
- cop_group_admin: varchar(15)
- user_id: int
- created_by: bigint
- cop_asset_creation: varchar(15)
- hide_video_conferencing: varchar(10)
- hide_cop_resources: varchar(10)
- user_type: varchar(50)
- parent_url: varchar(50)
- cqelcoach_group: int
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- cop_topic_creation: varchar(15)
- cop_members: varchar(100)
- disable_opt_out: varchar(10)
- hide_cop_members: varchar(10)
CopLocation:
- created_by: bigint
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
CoursesState:
- sub_roles: varchar(50)
- created_by: bigint
- course_name: varchar(150)
- course_identifier: varchar(50)
- course_number: varchar(50)
- created_at: unix timestamp
- lms_prototype: varchar(50)
- user_access: varchar(255)
- prototype_copy: int
- lms_course_url: varchar(100)
- title: varchar(255)
- type: varchar(50)
CycleDashboard:
- created_by: bigint
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
DiscussionBoards:
- created_by: bigint
- role_designation: varchar(50)
- created_at: unix timestamp
- description: text
- title: varchar(255)
- type: varchar(50)
DiscussionTopics:
- created_at: unix timestamp
- created_by: bigint
- id: varchar(50)
- prevent_inline_media: varchar(10)
- title: varchar(255)
- type: varchar(50)
- update_created_at: varchar(50)
Documentation:
  # created_at: unix timestamp
  # created_by: bigint
  # title: varchar(255)
  # type: varchar(50)
DualLanguageHandbook:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
DualLanguageSubmission:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
Ea_eval_survey:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
Endpoint:
- created_by: bigint
- recipe: varchar(255)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
FamilySurveyLink:
- created_by: bigint
- recipe: varchar(255)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
Grade:
  # created_at: unix timestamp
  # created_by: bigint
  # title: varchar(255)
  # type: varchar(50)
Inquisitor:
  # created_at: unix timestamp
  # created_by: bigint
  # title: varchar(255)
  # type: varchar(50)
InstructorMaterials:
- components_limit: int
- created_at: unix timestamp
- created_by: bigint
- title: varchar(255)
- type: varchar(50)
Item:
- created_by: bigint
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- filter_by: varchar(100)
Layout:
- created_by: bigint
- class: varchar(10)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
Limit:
- components_limit: int
- created_at: unix timestamp
- created_by: bigint
- recipe_key: int
- title: varchar(255)
- type: varchar(50)
Links:
- target: varchar(20)
- created_by: bigint
- link_url: varchar(150)
- color: varchar(10)
- created_at: unix timestamp
- role_access: varchar(50)
- title: varchar(255)
- type: varchar(50)
Lister:
- created_by: bigint
- lister_authority_display: varchar(20)
- repudiated_url: varchar(50)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- lister_authority: varchar(50)
- template: varchar(100)
- members: varchar(100)
Location:
- order_direction: varchar(15)
- created_by: bigint
- recipe: varchar(255)
- children_sequencer: varchar(10)
- order_by: varchar(50)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
Login:
- created_by: bigint
- recipe: varchar(255)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- login_disabled: boolean
- template: varchar(100)
Logout:
- created_by: bigint
- recipe: varchar(255)
- recipe_name: varchar(50)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
LtiEndpoint:
- created_by: bigint
- recipe: varchar(255)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
ManageComponents:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
ManageDatalists:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
ManageGroups:
- created_by: bigint
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
ManageMenus:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
ManageRecipes:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
ManageSite:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
ManageStudents:
  role_select: varchar(50)
  created_at: unix timestamp
  created_by: bigint
  title: varchar(255)
  type: varchar(50)
ManageUsers:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
Media:
- code: varchar(100)
- cqelcoach_resource: int
- created_at: unix timestamp
- created_by: bigint
- description: text
- disable_captions: boolean
- filename: varchar(100)
- id: varchar(50)
- inputtypes: varchar(50)
- job_id: varchar(50)
- link: varchar(150)
- media_type: varchar(100)
- name: varchar(100)
- on_cloudfront: varchar(10)
- path: varchar(50)
- published: varchar(50)
- ratings_id: varchar(50)
- recipe_key: int
- taxonomy: varchar(255)
- text: text
- title: varchar(255)
- type: varchar(50)
- vide_hightlight_location: varchar(100)
- video_hightlight_alias_id: int
- video_hightlight_created_by: bigint
- video_hightlight_location: varchar(100)
- video_hightlight_submission: int
- video_hightlight_submission_at: int
- video_hightlight_submission_copy: int
- vtt: varchar(255)
MediaDatabase:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
MeritEndpoint:
- created_by: bigint
- recipe: varchar(255)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
MssqlServer:
- created_by: bigint
- username: varchar(50)
- password: varchar(25)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- host: varchar(100)
- name: varchar(100)
Note:
- created_at: unix timestamp
- created_by: bigint
- notes: text
- title: varchar(255)
- type: varchar(50)
ProgramProfileSubmission:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
RatingsRubric:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
RecordsReviewHandbook:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
RecordsReviewSubmission:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
ReflectionAssignment:
- assignment_category: varchar(15)
- components_limit: int
- created_at: unix timestamp
- created_by: bigint
- instructions: text
- recipe_key: int
- title: varchar(255)
- type: varchar(50)
Reports:
- created_by: bigint
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- report_types: varchar(50)
ReportsBuilder:
- created_by: bigint
- recipe: varchar(255)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- report_types: varchar(50)
ResetPassword:
- created_by: bigint
- recipe: varchar(255)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
ResourceLibrary:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
SharedAssets:
- created_by: bigint
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
SharedGoals:
- completed_at: int
- core_knowledge_categories: varchar(100)
- created_at: unix timestamp
- created_by: bigint
- cycle_summary: text
- info: text
- prototype_id: int
- status: varchar(20)
- title: varchar(255)
- type: varchar(50)
Solotron:
- created_by: bigint
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- can_survey_components: varchar(150)
StudentSubmissions:
  # created_at: unix timestamp
  # created_by: bigint
  # title: varchar(255)
  # type: varchar(50)
StudentSubmissionsSlug:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
SupportingDocumentation:
  # created_at: unix timestamp
  # created_by: bigint
  # title: varchar(255)
  # type: varchar(50)
Tagit:
- created_by: bigint
- timestamp: int
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
Tracker:
- created_by: bigint
- created_at: unix timestamp
- description: text
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
UnassignedAssets:
- created_by: bigint
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
UploadAndReflectionAssignment:
- assignment_category: varchar(15)
- components_limit: int
- created_at: unix timestamp
- created_by: bigint
- grading_rubric: text
- instructions: text
- recipe_key: int
- title: varchar(255)
- type: varchar(50)
UserInvitations:
- created_by: bigint
- recipe: varchar(255)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
- template: varchar(100)
UserSettings:
- created_by: bigint
- recipe: varchar(255)
- recipe_name: varchar(50)
- created_at: unix timestamp
- title: varchar(255)
- type: varchar(50)
UserSubmissions:
- created_by: bigint
- recipe: varchar(255)
- can_view: varchar(150)
- repudiated_url: varchar(50)
- created_at: unix timestamp
- can_submit: varchar(150)
- title: varchar(255)
- type: varchar(50)
- content_administrator: varchar(10)
UsersLogAllAttributes:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
UsersLogCompletedGoals:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
UsersLogCopGroups:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
UsersLogCopGroupsDigest:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
UsersLogCreatedAt:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
UsersLogPartnerships:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
UsersLogProperties:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
UsersLogReporting:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
UsersLogSharedGoals:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
UsersLogUploads:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
VideoConference:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
VideoHighlightSubmission:
  # created_by: bigint
  # created_at: unix timestamp
  # title: varchar(255)
  # type: varchar(50)
VideoReflection:
- created_at: unix timestamp
- created_by: bigint
- idClassroom: int
- idRating: int
- idVHResponse: int
- parent_url: varchar(50)
- procedure: varchar(20)
- ratings_id: varchar(50)
- reflection_input: text
- title: varchar(255)
- type: varchar(50)
- updated_on: int


import pytest
from datetime import datetime, timezone
from coaching_companion.models import Access

# Define the datetime string
datetime_str = "2021-12-01T00:00:00Z"
# Parse the datetime string into a datetime object
datetime_obj = datetime.strptime(datetime_str, "%Y-%m-%dT%H:%M:%SZ")
# Convert the datetime object to a Unix timestamp (float)
unix_timestamp = datetime_obj.replace(tzinfo=timezone.utc).timestamp()

# Define the url string
url_str = "https://s3-us-west-2.amazonaws.com/test-bucket/test-key"

@pytest.mark.parametrize("unix_timestamp", [unix_timestamp]) # Allows us to define a single test with multiple potential inputs
def test_access(unix_timestamp):
    # Create an instance of Access
    dashboard = Access(
        created_at=unix_timestamp,
        created_by=int(12345678901234567890),
        title="Test Access Title",
        type_="access",
        content_create="create",
        content_delete="delete",
        content_edit="edit",
        recipe_key=123456,
        repudiated_url=url_str,
        role_access="access"
    )

    # Assert that the fields are correctly set
    assert dashboard.created_by == int(12345678901234567890)
    assert dashboard.title == "Test Access Title"
    assert dashboard.type_ == "access"
    assert dashboard.content_create == "create"
    assert dashboard.content_delete == "delete"
    assert dashboard.content_edit == "edit"
    assert dashboard.recipe_key == 123456
    assert dashboard.repudiated_url == url_str
    assert dashboard.role_access == "access"

    # Convert the Unix timestamp to a UTC datetime object
    expected_created_at = datetime.fromtimestamp(unix_timestamp, tz=timezone.utc)
    # Format the datetime object to the desired string format
    expected_created_at_str = expected_created_at.strftime("%Y-%m-%dT%H:%M:%SZ")

    # Assert that the created_at field is correctly converted and formatted
    assert expected_created_at_str == datetime_str

@pytest.mark.parametrize("unix_timestamp", [unix_timestamp])
def test_access_default_values(unix_timestamp):
    # Create an instance of Access without optional fields
    dashboard = Access(title="Test Dashboard", created_at=unix_timestamp)

    # Assert that the default values are correctly set
    assert dashboard.id is None
    assert dashboard.created_by is None
    assert isinstance(dashboard.created_at, float)
    assert dashboard.title == "Test Dashboard"
    assert dashboard.type_ is None
    assert dashboard.content_create is None
    assert dashboard.content_delete is None
    assert dashboard.content_edit is None
    assert dashboard.recipe_key is None
    assert dashboard.repudiated_url is None
    assert dashboard.role_access is None

def test_access_name_max_length():
    # Define the datetime string
    datetime_str = "2021-12-01T00:00:00Z"
    # Parse the datetime string into a datetime object
    datetime_obj = datetime.strptime(datetime_str, "%Y-%m-%dT%H:%M:%SZ")
    # Convert the datetime object to a Unix timestamp (float)
    unix_timestamp = datetime_obj.replace(tzinfo=timezone.utc).timestamp()
    
    # Create an instance of Access with a name exceeding max_length
    long_name = "A" * 300
    # Validate the id
    with pytest.raises(ValueError):
        Access.model_validate({"id": long_name})
    # Validate the title
    with pytest.raises(ValueError):
        Access.model_validate({"title": long_name})
    # Validate the created_by
    with pytest.raises(ValueError):
        Access.model_validate({"created_by": long_name})
    # Validate the created_at
    with pytest.raises(ValueError):
        Access.model_validate({"created_at": long_name})
    # Validate the type_
    with pytest.raises(ValueError):
        Access.model_validate({"type_": long_name})

# Run the tests
if __name__ == "__main__":
    pytest.main()
    
# References:
# - https://github.com/fastapi/sqlmodel/issues/52
# - https://www.datacamp.com/tutorial/pytest-tutorial-a-hands-on-guide-to-unit-testing
    